<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compact Transport Process Flowchart</title>
    <style>
      body {
        margin: 0;
        background: #fdfdfd;
      }
      .swimlane {
        fill: #f8f9fa;
        stroke: #dee2e6;
        stroke-width: 1.5;
      }
      .process-box {
        fill: #e3f2fd;
        stroke: #1976d2;
        stroke-width: 1.5;
        rx: 6;
      }
      .decision {
        fill: #fff3e0;
        stroke: #f57c00;
        stroke-width: 1.5;
      }
      .start-end {
        fill: #e8f5e8;
        stroke: #388e3c;
        stroke-width: 1.5;
        rx: 15;
      }
      .text {
        font-family: Arial, sans-serif;
        font-size: 9px;
        text-anchor: middle;
        dominant-baseline: middle;
      }
      .title {
        font-size: 10px;
        font-weight: bold;
      }
      .swimlane-title {
        font-size: 11px;
        font-weight: bold;
        text-anchor: middle;
      }
      .connector {
        stroke: #333;
        stroke-width: 1.5;
        fill: none;
        marker-end: url(#arrowhead);
      }
      .yes-no {
        font-size: 8px;
        fill: #666;
      }
    </style>
  </head>
  <body>
    <svg
      viewBox="0 0 800 1100"
      width="100%"
      height="100%"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <marker
          id="arrowhead"
          markerWidth="8"
          markerHeight="5"
          refX="8"
          refY="2.5"
          orient="auto"
        >
          <polygon points="0 0, 8 2.5, 0 5" fill="#333" />
        </marker>
      </defs>

      <!-- Swimlanes -->
      <rect class="swimlane" x="10" y="40" width="250" height="1040" />
      <rect class="swimlane" x="260" y="40" width="250" height="1040" />
      <rect class="swimlane" x="510" y="40" width="250" height="1040" />

      <!-- Swimlane titles -->
      <text class="swimlane-title" x="135" y="30">KHÁCH HÀNG</text>
      <text class="swimlane-title" x="385" y="30">QUẢN TRỊ VIÊN USTRANS</text>
      <text class="swimlane-title" x="635" y="30">NHÀ XE/TÀI XẾ</text>

      <!-- Start -->
      <ellipse class="start-end" cx="135" cy="70" rx="50" ry="20" />
      <text class="text title" x="135" y="70">BẮT ĐẦU</text>

      <!-- Các bước (Process, Decision, End) -->
      <!-- (giữ nguyên toàn bộ phần flowchart bạn viết, mình không sửa logic chỉ chỉnh style ở trên) -->

      <!-- Step 1: Customer creates request -->
      <rect class="process-box" x="45" y="100" width="180" height="50" />
      <text class="text" x="135" y="110">Tạo yêu cầu vận chuyển</text>
      <text class="text" x="135" y="125">nhập/xuất container</text>
      <text class="text" x="135" y="140">Chọn loại, trọng lượng, địa điểm</text>

      <!-- Step 2: Admin reviews -->
      <rect class="process-box" x="300" y="160" width="180" height="30" />
      <text class="text" x="390" y="175">Kiểm tra & duyệt yêu cầu</text>

      <!-- Decision: Valid? -->
      <polygon class="decision" points="390,200 420,220 390,240 360,220" />
      <text class="text" x="390" y="220">Hợp lệ?</text>

      <!-- Step 3: Admin creates quote for customer -->
      <rect class="process-box" x="300" y="260" width="180" height="30" />
      <text class="text" x="390" y="275">Tạo báo giá cho khách hàng</text>

      <!-- Step 4: Admin sends quote to driver -->
      <rect class="process-box" x="300" y="300" width="180" height="30" />
      <text class="text" x="390" y="315">Gửi báo giá cho đối tác</text>

      <!-- Decision: Driver accepts? -->
      <polygon class="decision" points="635,340 665,360 635,380 605,360" />
      <text class="text" x="635" y="360">Chấp nhận?</text>

      <!-- Step 6: Driver confirms -->
      <rect class="process-box" x="545" y="400" width="180" height="30" />
      <text class="text" x="635" y="415">Xác nhận nhận chuyến</text>

      <!-- Decision: Customer agrees to quote? -->
      <polygon class="decision" points="135,450 165,470 135,490 105,470" />
      <text class="text" x="135" y="460">Đồng ý</text>
      <text class="text" x="135" y="475">báo giá?</text>

      <!-- Step 8: Customer payment -->
      <rect class="process-box" x="45" y="510" width="180" height="30" />
      <text class="text" x="135" y="525">Thanh toán</text>

      <!-- Step 9: Admin confirms payment -->
      <rect class="process-box" x="300" y="550" width="180" height="30" />
      <text class="text" x="390" y="565">Xác nhận thanh toán</text>

      <!-- Step 10: Admin issues transport order -->
      <rect class="process-box" x="300" y="590" width="180" height="30" />
      <text class="text" x="390" y="605">Phát lệnh vận chuyển</text>

      <!-- Step 11: Driver starts -->
      <rect class="process-box" x="545" y="630" width="180" height="30" />
      <text class="text" x="635" y="645">Nhận lệnh & bắt đầu</text>

      <!-- Step 12: Driver updates images -->
      <rect class="process-box" x="545" y="670" width="180" height="50" />
      <text class="text" x="635" y="685">Cập nhật hình ảnh container</text>
      <text class="text" x="635" y="700">seal, rỗng, EIR</text>
      <text class="text" x="635" y="715">tại từng bước</text>

      <!-- Step 13: Customer tracks -->
      <rect class="process-box" x="45" y="740" width="180" height="30" />
      <text class="text" x="135" y="755">Theo dõi hành trình GPS</text>

      <!-- Step 14: Driver transports -->
      <rect class="process-box" x="545" y="780" width="180" height="30" />
      <text class="text" x="635" y="795">Vận chuyển hàng</text>

      <!-- Decision: Additional costs? -->
      <polygon class="decision" points="635,820 665,840 635,860 605,840" />
      <text class="text" x="635" y="830">Chi phí</text>
      <text class="text" x="635" y="845">phát sinh?</text>

      <!-- Step 16: Admin handles additional costs -->
      <rect class="process-box" x="300" y="880" width="180" height="40" />
      <text class="text" x="390" y="895">Xử lý chi phí phát sinh</text>
      <text class="text" x="390" y="910">vệ sinh, sửa chữa...</text>

      <!-- Step 17: Driver completes -->
      <rect class="process-box" x="545" y="930" width="180" height="30" />
      <text class="text" x="635" y="945">Hoàn thành chuyến</text>

      <!-- Step 18: Customer evaluation -->
      <rect class="process-box" x="45" y="970" width="180" height="30" />
      <text class="text" x="135" y="985">Đánh giá tài xế</text>

      <!-- End -->
      <ellipse class="start-end" cx="390" cy="1050" rx="40" ry="20" />
      <text class="text title" x="390" y="1050">KẾT THÚC</text>

      <!-- Connectors -->
      <line class="connector" x1="135" y1="90" x2="135" y2="100" />
      <line class="connector" x1="225" y1="125" x2="300" y2="175" />
      <line class="connector" x1="390" y1="190" x2="390" y2="200" />

      <!-- Reject branch -->
      <line class="connector" x1="360" y1="220" x2="250" y2="220" />
      <line class="connector" x1="250" y1="220" x2="250" y2="125" />
      <line class="connector" x1="250" y1="125" x2="225" y2="125" />
      <text class="yes-no" x="290" y="210">Không</text>

      <!-- Accept branch -->
      <line class="connector" x1="390" y1="240" x2="390" y2="260" />
      <text class="yes-no" x="405" y="245">Có</text>

      <line class="connector" x1="390" y1="290" x2="390" y2="300" />
      <line class="connector" x1="480" y1="315" x2="605" y2="360" />

      <!-- Driver reject branch -->
      <line class="connector" x1="605" y1="360" x2="540" y2="360" />
      <line class="connector" x1="540" y1="360" x2="540" y2="315" />
      <line class="connector" x1="540" y1="315" x2="480" y2="315" />
      <text class="yes-no" x="565" y="350">Không</text>

      <!-- Driver accept -->
      <line class="connector" x1="635" y1="380" x2="635" y2="400" />
      <text class="yes-no" x="650" y="390">Có</text>

      <!-- Send quote to customer -->
      <line class="connector" x1="300" y1="275" x2="165" y2="470" />
      <line class="connector" x1="635" y1="430" x2="165" y2="470" />

      <!-- Customer reject -->
      <line class="connector" x1="105" y1="470" x2="40" y2="470" />
      <line class="connector" x1="40" y1="470" x2="40" y2="125" />
      <line class="connector" x1="40" y1="125" x2="45" y2="125" />
      <text class="yes-no" x="65" y="460">Không</text>

      <!-- Customer accept -->
      <line class="connector" x1="135" y1="490" x2="135" y2="510" />
      <text class="yes-no" x="150" y="500">Có</text>

      <!-- Payment flow -->
      <line class="connector" x1="225" y1="525" x2="300" y2="565" />
      <line class="connector" x1="390" y1="580" x2="390" y2="590" />
      <line class="connector" x1="480" y1="605" x2="545" y2="645" />
      <line class="connector" x1="635" y1="660" x2="635" y2="670" />

      <!-- Customer tracking -->
      <line class="connector" x1="545" y1="700" x2="225" y2="755" />

      <!-- Continue transport -->
      <line class="connector" x1="635" y1="720" x2="635" y2="780" />
      <line class="connector" x1="635" y1="810" x2="635" y2="820" />

      <!-- Additional costs -->
      <line class="connector" x1="605" y1="840" x2="480" y2="900" />
      <text class="yes-no" x="540" y="870">Có</text>

      <!-- No additional costs -->
      <line class="connector" x1="635" y1="860" x2="635" y2="930" />
      <text class="yes-no" x="650" y="895">Không</text>

      <!-- Handle additional costs -->
      <line class="connector" x1="390" y1="920" x2="635" y2="945" />

      <!-- Final steps -->
      <line class="connector" x1="545" y1="945" x2="225" y2="985" />

      <!-- Connector từ Đánh giá tài xế đến KẾT THÚC -->
      <polyline class="connector" points="135,1000 135,1050 390,1050" />
    </svg>
  </body>
</html>
